<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Image Tracking - AR.js Documentation</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/docco.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">AR.js Documentation</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href=".." class="nav-link">Home</a>
                            </li>
                            <li class="navitem active">
                                <a href="./" class="nav-link">Image Tracking</a>
                            </li>
                            <li class="navitem">
                                <a href="../location-based/" class="nav-link">Location Based</a>
                            </li>
                            <li class="navitem">
                                <a href="../marker-based/" class="nav-link">Marker Based</a>
                            </li>
                            <li class="navitem">
                                <a href="../ui-events/" class="nav-link">UI and Events</a>
                            </li>
                            <li class="navitem">
                                <a href="../about/" class="nav-link">About</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href=".." class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../location-based/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#image-tracking" class="nav-link">Image Tracking</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#getting-started-with-image-tracking" class="nav-link">Getting started with Image Tracking</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#choose-good-images" class="nav-link">Choose good images</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#create-image-descriptors" class="nav-link">Create Image Descriptors</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#render-the-content" class="nav-link">Render the content</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#event-listeners" class="nav-link">Event listeners</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="image-tracking">Image Tracking</h1>
<p>Image Tracking makes possible to scan a picture, a drawing, any image, and show content over it.</p>
<p>All the following examples are with A-Frame, for simplicity. You can use three.js if you want. See on the official repository the <a href="https://github.com/AR-js-org/AR.js/blob/master/three.js/examples/nft.html">nft three.js example</a>.</p>
<p>All A-Frame examples for Image Tracking can be found <a href="https://github.com/AR-js-org/AR.js/tree/master/aframe/examples/image-tracking/">here</a>.</p>
<h2 id="getting-started-with-image-tracking">Getting started with Image Tracking</h2>
<p>Natural Feature Tracking or NFT is a technology that enables the use of images instead of markers like QR Codes or the Hiro marker.</p>
<p>The software tracks interesting points in the image and using them, it estimates the position of the camera. These interesting points (aka "Image Descriptors") are created using the <code>NFT Marker Creator</code>, a tool available for creating NFT markers. It comes in two versions: the <a href="https://carnaux.github.io/NFT-Marker-Creator/">Web version</a>(recommended), and the <a href="https://github.com/Carnaux/NFT-Marker-Creator">node.js version</a>. There is also a fork of this project on the AR.js Github organisation, but as for now, <a href="https://twitter.com/DanielCarnaux">Daniel Fernandes</a> version works perfectly.</p>
<p><em>Thanks to <a href="https://twitter.com/DanielCarnaux">Daniel Fernandes</a> for contribution on this docs section.</em></p>
<h2 id="choose-good-images">Choose good images</h2>
<p>If you want to understand the creation of markers in more depth, check out the NFT Marker Creator <a href="https://github.com/Carnaux/NFT-Marker-Creator/wiki/Creating-good-markers">wiki</a>. It explains also why certain images work way better than others. An important factor is the DPI of the image: a good dpi (300 or more) will give a very good stabilization, while low DPI (like 72) will require the user to stay very still and close to the image, otherwise tracking will lag.</p>
<h2 id="create-image-descriptors">Create Image Descriptors</h2>
<p>Once you have chosen your image, you can either use the NFT Marker Creator in its <a href="https://carnaux.github.io/NFT-Marker-Creator/">Web version</a> or the node version.</p>
<p>If you're using the node version, this is the basic command to run:</p>
<pre><code class="language-bash">node app.js -i &lt;path-to-the-img/image-name.jpg/png&gt;
</code></pre>
<p>After that, you will find the Image Descriptors files on the <code>output</code> folder. In the web version, the generator will automatically download the files from your browser.</p>
<p>In either cases, you will end up with three files as Image Descriptors, with <code>.fset</code>, <code>.fset3</code>, <code>.iset</code>.
Each of them will have the same prefix before the file extension. That one will be the Image Descriptor name that you will use on the AR.js web app.
For example: with files <code>trex.fset</code>, <code>trex.fset3</code> and <code>trex.iset</code>, your Image Descriptors name will be <code>trex</code>.</p>
<h2 id="render-the-content">Render the content</h2>
<p>Now it's time to create the actual AR web app.</p>
<pre><code class="language-html">&lt;!-- import aframe and then ar.js with image tracking / location based features --&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/gh/aframevr/aframe@1c2407b26c61958baa93967b5412487cd94b290b/dist/aframe-master.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js&quot;&gt;&lt;/script&gt;

&lt;!-- style for the loader --&gt;
&lt;style&gt;
  .arjs-loader {
    height: 100%;
    width: 100%;
    position: absolute;
    top: 0;
    left: 0;
    background-color: rgba(0, 0, 0, 0.8);
    z-index: 9999;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .arjs-loader div {
    text-align: center;
    font-size: 1.25em;
    color: white;
  }
&lt;/style&gt;

&lt;body style=&quot;margin : 0px; overflow: hidden;&quot;&gt;
  &lt;!-- minimal loader shown until image descriptors are loaded. Loading may take a while according to the device computational power --&gt;
  &lt;div class=&quot;arjs-loader&quot;&gt;
    &lt;div&gt;Loading, please wait...&lt;/div&gt;
  &lt;/div&gt;

  &lt;!-- a-frame scene --&gt;
  &lt;a-scene
    vr-mode-ui=&quot;enabled: false;&quot;
    renderer=&quot;logarithmicDepthBuffer: true;&quot;
    embedded
    arjs=&quot;trackingMethod: best; sourceType: webcam;debugUIEnabled: false;&quot;
  &gt;
    &lt;!-- a-nft is the anchor that defines an Image Tracking entity --&gt;
    &lt;!-- on 'url' use the path to the Image Descriptors created before. --&gt;
    &lt;!-- the path should end with the name without the extension e.g. if file is 'pinball.fset' the path should end with 'pinball' --&gt;
    &lt;a-nft
      type=&quot;nft&quot;
      url=&quot;&lt;path-to-your-image-descriptors&gt;&quot;
      smooth=&quot;true&quot;
      smoothCount=&quot;10&quot;
      smoothTolerance=&quot;.01&quot;
      smoothThreshold=&quot;5&quot;
    &gt;
      &lt;!-- as a child of the a-nft entity, you can define the content to show. here's a GLTF model entity --&gt;
      &lt;a-entity
        gltf-model=&quot;&lt;path-to-your-model&gt;&quot;
        scale=&quot;5 5 5&quot;
        position=&quot;50 150 0&quot;
      &gt;
      &lt;/a-entity&gt;
    &lt;/a-nft&gt;
    &lt;!-- static camera that moves according to the device movemenents --&gt;
    &lt;a-entity camera&gt;&lt;/a-entity&gt;
  &lt;/a-scene&gt;
&lt;/body&gt;
</code></pre>
<p>See on the comments above, inline on the code, for explanations.</p>
<p>You can refer to <a href="https://aframe.io/docs/1.0.0/introduction/">A-Frame docs</a> to know everything about content and customization. You can add geometries, 3D models, videos, images. And you can customize their position, scale, rotation and so on.</p>
<p>The only custom component here is the <code>a-nft</code>, the Image Tracking HTML anchor.</p>
<h3 id="a-nft"><code>&lt;a-nft\&gt;</code></h3>
<p>Here are the attributes for this entity</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Description</th>
<th>Component Mapping</th>
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td>type of marker - ['nft' only valid value]</td>
<td>artoolkitmarker.type</td>
</tr>
<tr>
<td>url</td>
<td>url of the Image Descriptors, without extension</td>
<td>artoolkitmarker.descriptorsUrl</td>
</tr>
<tr>
<td>emitevents</td>
<td>emits 'markerFound' and 'markerLost' events - ['true', 'false']</td>
<td>-</td>
</tr>
<tr>
<td>smooth</td>
<td>turn on/off camera smoothing - ['true', 'false'] - default: false</td>
<td>-</td>
</tr>
<tr>
<td>smoothCount</td>
<td>number of matrices to smooth tracking over, more = smoother but slower follow - default: 5</td>
<td>-</td>
</tr>
<tr>
<td>smoothTolerance</td>
<td>distance tolerance for smoothing, if smoothThreshold # of matrices are under tolerance, tracking will stay still - default: 0.01</td>
<td>-</td>
</tr>
<tr>
<td>smoothThreshold</td>
<td>threshold for smoothing, will keep still unless enough matrices are over tolerance - default: 2</td>
<td>-</td>
</tr>
<tr>
<td>size</td>
<td>size of the marker in meter</td>
<td>artoolkitmarker.size</td>
</tr>
</tbody>
</table>
<p>⚡️ It is suggested to use <code>smooth</code>, <code>smoothCount</code> and <code>smoothTolerance</code> because of weak stabilization of content in Image Tracking. Thanks to smoothing, content is way more stable, from 3D models to 2D videos.</p>
<h2 id="event-listeners">Event listeners</h2>
<p>The <code>arjs-nft-loaded</code> event is fired when all NFT Markers have finished loading. This is when you will be able to start tracking your NFT Marker with the camera.</p>
<p>You can use this to build a UI to inform the user that things are still loading.</p>
<h3 id="usage">Usage</h3>
<pre><code class="language-js">window.addEventListener(&quot;arjs-nft-loaded&quot;, (event) =&gt; {
  // Hide loading overlay
});
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../js/jquery-3.6.0.min.js"></script>
        <script src="../js/bootstrap.min.js"></script>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js"></script>
        <script src="../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
