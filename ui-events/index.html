<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>UI and Events - AR.js Documentation</title>
        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/docco.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="..">AR.js Documentation</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="..">Home</a>
                            </li>
                            <li >
                                <a href="../image-tracking/">Image Tracking</a>
                            </li>
                            <li >
                                <a href="../location-based/">Location Based</a>
                            </li>
                            <li >
                                <a href="../marker-based/">Marker Based</a>
                            </li>
                            <li class="active">
                                <a href="./">UI and Events</a>
                            </li>
                            <li >
                                <a href="../about/">About</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="../marker-based/">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="../about/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#ui-and-custom-events">UI and Custom Events</a></li>
            <li><a href="#handle-clicks-on-ar-content">Handle clicks on AR content</a></li>
            <li><a href="#interaction-with-overlayed-dom-content">Interaction with Overlayed DOM content</a></li>
            <li><a href="#custom-events">Custom Events</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="ui-and-custom-events">UI and Custom Events</h1>
<p>To make AR.js based Web App looking better and add UI capabilities, it's possible to treat is as common website.
Here you will learn how to use Raycaster, Custom Events and Interaction with overlayed DOM elements.</p>
<p>First of all, an introduction about click interactions: it is possible to click directly on content using A-Frame, we tested and had good result with version <code>0.9.2</code>. Keep in mind that clicks (or touch interactions) are not very reliable: it can work if you</p>
<ul>
<li>need only few clicks, not very reliable</li>
<li>have to click on very few entities on screen</li>
<li>clicks work only on the center of the screen, not at the angles, so beware that your entities, to be clicked, should be great enough and not positioned on angles.</li>
</ul>
<p>What I suggest is that you have always to remember that AR.js is Web AR, that means, you can use <strong>any</strong> DOM elements interactions you want.
They work perfectly and most of the times, the Overlayed DOM content interaction is enough for common needs.</p>
<h2 id="handle-clicks-on-ar-content">Handle clicks on AR content</h2>
<p>We can use click/touch interactions through raycaster, following <a href="https://aframe.io/docs/1.0.0/introduction/interactions-and-controllers.html">A-Frame Docs</a>.</p>
<p>We can register an event listener for any a-frame entity. So this method works also for Marker Based, Image Tracking and Location Based.
We will show it on a Location Based examples, registering the click on <code>a-entity</code> - so the same can be done with <code>a-marker</code> or <code>a-nft</code>.</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot; /&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot; /&gt;
    &lt;title&gt;Click Location Based Example&lt;/title&gt;
    &lt;script src=&quot;https://aframe.io/releases/0.9.2/aframe.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js&quot;&gt;&lt;/script&gt;
  &lt;/head&gt;

  &lt;script&gt;
    // here we register che 'clickhandler' component
    AFRAME.registerComponent(&quot;clickhandler&quot;, {
      init: function() {
        // we add the click event listener to instance of this component
        this.el.addEventListener(&quot;click&quot;, () =&gt; {
          alert(&quot;Clicked!&quot;);
        });
      }
    });
  &lt;/script&gt;

  &lt;body style=&quot;margin: 0; overflow: hidden;&quot;&gt;
    &lt;!-- with cursor and raycaster, we define a raycaster handler
    on raycaster we add a CSS selector to match the only elements that will react to click events
    for performances reason
    see: (https://aframe.io/docs/1.0.0/introduction/interactions-and-controllers.html) --&gt;
    &lt;a-scene
      cursor=&quot;rayOrigin: mouse; fuse: true; fuseTimeout: 0;&quot;
      raycaster=&quot;objects: [clickhandler];&quot;
      vr-mode-ui=&quot;enabled: false&quot;
      embedded
      arjs=&quot;sourceType: webcam; debugUIEnabled: false;&quot;
    &gt;
      &lt;!-- this entity, potentially every other on the a-scene, has the 'clickhandler' component
      and will behave has we have defined: it will handle click events! --&gt;
      &lt;a-box
        clickhandler
        material=&quot;color: red;&quot;
        scale=&quot;20 20 20&quot;
        gps-entity-place=&quot;latitude: &lt;your-latitude&gt;; longitude: &lt;your-longitude&gt;;&quot;
      &gt;
      &lt;/a-box&gt;

      &lt;a-camera gps-camera rotation-reader&gt; &lt;/a-camera&gt;
    &lt;/a-scene&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>You can use this exact approach for Image Tracking <code>a-nft</code> and Marker Based <code>a-entity</code> elements.
The <code>clickhandler</code> name can be customized, you can choose the one you like most, it's just a reference.
Keep in mind that this click/touch interaction is not handled by AR.js at all, it is all A-Frame based.
Always look on the A-Frame documentation for more details.</p>
<h2 id="interaction-with-overlayed-dom-content">Interaction with Overlayed DOM content</h2>
<p>You can add interations by adding DOM HTML elements on the <code>body</code>.
For example, startinf from this example:</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;script src=&quot;https://aframe.io/releases/1.0.0/aframe.min.js&quot;&gt;&lt;/script&gt;
  &lt;!-- we import arjs version without NFT but with marker + location based support --&gt;
  &lt;script src=&quot;https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js&quot;&gt;&lt;/script&gt;
  &lt;body style=&quot;margin : 0px; overflow: hidden;&quot;&gt;
    &lt;a-scene embedded arjs&gt;
      &lt;a-marker preset=&quot;hiro&quot;&gt;
        &lt;a-entity
          position=&quot;0 0 0&quot;
          scale=&quot;0.05 0.05 0.05&quot;
          gltf-model=&quot;https://arjs-cors-proxy.herokuapp.com/https://raw.githack.com/AR-js-org/AR.js/master/aframe/examples/image-tracking/nft/trex/scene.gltf&quot;
        &gt;&lt;/a-entity&gt;
      &lt;/a-marker&gt;
      &lt;a-entity camera&gt;&lt;/a-entity&gt;
    &lt;/a-scene&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>We can add on the body, outside the <code>a-scene</code>:</p>
<pre><code class="html">&lt;div class=&quot;buttons&quot;&gt;
  &lt;button class=&quot;say-hi-button&quot;&gt;&lt;/button&gt;
&lt;/div&gt;
</code></pre>

<p>Then, we need to add some CSS to absolute positioning the DIV and BUTTON, and also some scripting to listen to click events.</p>
<p>You can customize your <code>a-scene</code> or content, like 3D models, play video, and so on. See on A-Frame Docs on how to change entity properties and work with events: https://aframe.io/docs/1.0.0/introduction/javascript-events-dom-apis.html.</p>
<p>We will end up with the following code:</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;script src=&quot;https://aframe.io/releases/1.0.0/aframe.min.js&quot;&gt;&lt;/script&gt;
  &lt;!-- we import arjs version without NFT but with marker + location based support --&gt;
  &lt;script src=&quot;https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js&quot;&gt;&lt;/script&gt;
  &lt;script&gt;
    window.onload = function() {
      document
        .querySelector(&quot;.say-hi-button&quot;)
        .addEventListener(&quot;click&quot;, function() {
          // here you can change also a-scene or a-entity properties, like
          // changing your 3D model source, size, position and so on
          // or you can just open links, trigger actions...
          alert(&quot;Hi there!&quot;);
        });
    };
  &lt;/script&gt;
  &lt;style&gt;
    .buttons {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 5em;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .say-hi-button {
      padding: 0.25em;
      border-radius: 4px;
      border: none;
      background: white;
      color: black;
      width: 4em;
      height: 2em;
    }
  &lt;/style&gt;
  &lt;body style=&quot;margin : 0px; overflow: hidden;&quot;&gt;
    &lt;div class=&quot;buttons&quot;&gt;
      &lt;button class=&quot;say-hi-button&quot;&gt;SAY HI!&lt;/button&gt;
    &lt;/div&gt;
    &lt;a-scene embedded arjs&gt;
      &lt;a-marker preset=&quot;hiro&quot;&gt;
        &lt;a-entity
          position=&quot;0 0 0&quot;
          scale=&quot;0.05 0.05 0.05&quot;
          gltf-model=&quot;https://arjs-cors-proxy.herokuapp.com/https://raw.githack.com/AR-js-org/AR.js/master/aframe/examples/image-tracking/nft/trex/scene.gltf&quot;
        &gt;&lt;/a-entity&gt;
      &lt;/a-marker&gt;
      &lt;a-entity camera&gt;&lt;/a-entity&gt;
    &lt;/a-scene&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<h2 id="custom-events">Custom Events</h2>
<p>AR.js triggers several Custom Events.</p>
<p>Some of them are general, other are specific for AR Featuree. Here's the full list.</p>
<table>
<thead>
<tr>
<th>Custom Event name</th>
<th>Description</th>
<th>Payload</th>
<th>Source File</th>
<th>Feature</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>arjs-video-loaded</code></td>
<td>Fired when camera video stream has been appended to the DOM</td>
<td><code>{ detail: { component: &lt;HTMLElement&gt; }}</code></td>
<td>threex-artoolkitsource.js</td>
<td>all</td>
</tr>
<tr>
<td><code>camera-error</code></td>
<td>Fired when camera video stream could not be retrieved</td>
<td><code>{ error: &lt;Error&gt; }</code></td>
<td>threex-artoolkitsource.js</td>
<td>all</td>
</tr>
<tr>
<td><code>camera-init</code></td>
<td>Fired when camera video stream has been retrieved correctly</td>
<td><code>{ stream: &lt;MediaStream&gt; }</code></td>
<td>threex-artoolkitsource.js</td>
<td>all</td>
</tr>
<tr>
<td><code>markerFound</code></td>
<td>Fired when a marker in Marker Based, or a picture in Image Tracking, has been found</td>
<td>-</td>
<td>component-anchor.js</td>
<td>only Image Tracking and Marker Based</td>
</tr>
<tr>
<td><code>markerLost</code></td>
<td>Fired when a marker in Marker Based, or a picture in Image Tracking, has been lost</td>
<td>-</td>
<td>component-anchor.js</td>
<td>only Image Tracking and Marker Based</td>
</tr>
<tr>
<td><code>gps-camera-update-positon</code></td>
<td>Fired when <code>gps-camera</code> has updated its position</td>
<td><code>{ detail:</code>  <code>{ position: &lt;GeolocationCoordinates&gt;,</code>  <code>origin: &lt;GeolocationCoordinates&gt; }}</code></td>
<td>gps-camera.js</td>
<td>only Location Based</td>
</tr>
<tr>
<td><code>gps-entity-place-update-positon</code></td>
<td>Fired when <code>gps-entity-place</code> has updated its position</td>
<td><code>{ detail: { distance: &lt;Number&gt; }}</code></td>
<td>gps-entity-place.js</td>
<td>only Location Based</td>
</tr>
<tr>
<td><code>gps-entity-place-added</code></td>
<td>Fired when the <code>gps-entity-place</code> has been added</td>
<td><code>{ detail: { component: &lt;HTMLElement&gt; }}</code></td>
<td>gps-entity-place.js</td>
<td>only Location Based</td>
</tr>
<tr>
<td><code>gps-camera-origin-coord-set</code></td>
<td>Fired when the origin coordinates are set</td>
<td>-</td>
<td>gps-camera.js</td>
<td>only Location Based</td>
</tr>
<tr>
<td><code>gps-entity-place-loaded</code></td>
<td>Fired when the <code>gps-entity-place</code> has been - see 'loaded' event of A-Frame entities</td>
<td><code>{ detail: { component: &lt;HTMLElement&gt; }}</code></td>
<td>gps-entity-place.js</td>
<td>only Location Based</td>
</tr>
</tbody>
</table>
<h3 id="when-the-loader-breaks">When the Loader breaks</h3>
<p>⚡️ Both Image Tracking and Location Based automatically handle an internal event when</p>
<ul>
<li>origin location has been set</li>
<li>Image Tracking (Image Descriptors) are fully loaded</li>
</ul>
<p>And automatically remove from the DOM elements that match the <code>.arjs-loader</code> selector.</p>
<p>You can add any custom loader that will be remove in the above situations, just use the <code>.arjs-loader</code> class on it.</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"search": 83, "next": 78, "help": 191, "previous": 80};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
